# 
# dataux configuration example
#

supress_recover: true

# list of etcd servers [ "http://127.0.0.1:2379","http://127.0.0.1:2380"]
etcd  = ["http://localhost:2379"]

# Nats.io GnatsD list of servers
#   [ 'nats://10.240.134.116:4222', 'nats://10.145.147.112:4222' ]
nats  = [ "nats://localhost:4222" ]



# FrontEnd is inbound tcp connection listener
# we don't bind to 3306 because that is mysql's 
# 
#     mysql -h127.0.0.1 -P4000 -Ddatauxtest
#
frontends [
  {
    type    : mysql
    address : "127.0.0.1:4000"
  }
]




# schemas:   ie a virtual database made up of 
#   combining tables from each source into a flattened table
schemas : [
  {
    name : datauxtest
    sources : [ "mgo_datauxtest", "es_test" ]
  }
  {
    name : baseball
    sources : [ "gcs_baseball_csv" ]
  }
  # {
  #   name : baseball_local
  #   sources : [ "local_baseball_csv" ]
  # }
]

# sources
#   - elasticsearch which uses example data from github, see tools/importgithub
#   - cloud files w baseball csv files
#   - mongo
#
sources : [
  {
    name : mgo_datauxtest
    type : mongo
  }

  {
    name : es_test
    type : elasticsearch
  }

  {
    # this section is a "CloudStorage" source for csv files 
    # stored on google-storage from
    #      http://seanlahman.com/baseball-archive/statistics/ 
    name     "gcs_baseball_csv"
    type     "cloudstore"
    settings  {
      # types:  "gcs","localfs"
      type           "gcs"
      # google cloud storage bucket name, ie the gs://bucket-name
      bucket      "lytics-dataux-tests"
      # restrict to looking for files inside this folder on bucket
      path           "baseball/"
      # format, csv, json, custom 
      format         "csv"
    }
  }

  {
    name     "local_baseball_csv"
    type     "cloudstore"
    settings  {
      type           "localfs"
      path           "/tmp/baseball/"
      format         "csv"
    }
  }
  
  {
    name     : "gcs1"
    type     : "cloudstore"
    settings : {
      type      : "gcs"
      project   : "myproject"
      jwt       : "/home/aaron/google-datastore/googlejwt.json"
    }
  },
]

# List of nodes hosting data sources
nodes : [
  {
    name    : estest1
    source  : es_test
    address : "http://localhost:9200"
  },
  {
    name    : mgotest1
    source  : mgo_datauxtest
    address : "localhost"
  }
]