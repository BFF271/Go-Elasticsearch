# 
# dataux configuration
#

supress_recover: true

# FrontEnd is inbound tcp connection listener
frontends [
  {
    name : mysql 
    type : "mysql"
    addr : "127.0.0.1:4000"
    user : root
    #password : 
  }
]

schemas : [
  {
    db : mixer
    source_nodes : ["node1", "node2", "node3"]
    source_type : mysql
    # list of rules for routing traffice to 
    # backend servers
    rules : {
      default : node1
      # shards
      shard : [
        {
          table : mixer_test_shard_hash
          key : id
          source_nodes: [ "node2", "node3"]
          type : hash
        },
        {
          table: mixer_test_shard_range
          key: id
          type: range
          source_nodes: [ node2, node3 ]
          range: "-10000-"
        }
      ]
    }
  },
  {
    db : es
    properties : {
      stuff : "value"
    }
    source_type : elasticsearch
    address : "http://localhost:9200"
  },
  {
    db : lio
    source_type : mongo
    source_nodes : ["mgo1"]
    address : "localhost"
  }
]


# list of data source nodes/servers
sources [
  {
    db : lio
    source_nodes : ["mgo1"]
    source_type : mongo
    address : "localhost"
  }
  {
    name : node1 
    down_after_noalive : 300
    idle_conns : 16
    rw_split : true
    user : root
    master : "localhost:3307"
    #slave : "127.0.0.1:4306"
  },
  {
    name : node2
    down_after_noalive : 300
    idle_conns : 16
    rw_split: false
    user: root
    master : "localhost:3308"
  },
  {
    name : node3 
    down_after_noalive : 300
    idle_conns : 16
    rw_split: false
    user: root
    master : "localhost:3309"
  }
]